<div ng-controller="MapController as vm">
    <div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="https://maps.googleapis.com/maps/api/js?key=AIzaSyCA9p-VcduuEx26akKWfJexErfC0H1eMB8">
        <ng-map default-style="true" gm-center="{{ positions[0] }}" zoom-to-include-markers="true">
            <div ng-repeat="position in positions">
                <custom-marker position="{{ position }}">
                    <img src="https://chart.googleapis.com/chart?chst=d_map_spin&chld=1.0|0|FF0000|18|_|{{ positions.indexOf(position) + 1 }}"
                    />
                    </marker>
            </div>
            <shape name="polyline" path="{{positions}}" geodesic="true" stroke-color="#F00" stroke-opacity="1.0" stroke-weight="4">
            </shape>
        </ng-map>
    </div>
</div>